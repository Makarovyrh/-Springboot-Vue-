webpackJsonp([6],{D3eR:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("BO1k"),a=r.n(i),o=r("gyMJ"),s={name:"ConsumerPage",mixins:[r("msXN").a],data:function(){return{centerDialogVisible:!1,editVisible:!1,delVisible:!1,registerForm:{username:"",password:"",sex:"1",phoneNum:"",email:"",birth:"",introduction:"",location:""},editForm:{id:"",username:"",password:"",sex:"",phoneNum:"",email:"",birth:"",introduction:"",location:""},tableData:[],tempData:[],select_word:"",pageSize:"5",currentPage:"1",idx:-1,multipleSelection:[],rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],phoneNum:[{required:!0,message:"请输入手机号",trigger:"blur"}],email:[{required:!0,message:"请输入电子邮箱",trigger:"blur"},{type:"email",message:"请输入正确的电子邮箱地址",trigger:["blur","change"]}],introduction:[{required:!0,message:"请输入签名",trigger:"blur"}],location:[{required:!0,message:"请输入地区",trigger:"blur"}]}}},computed:{data:function(){return this.tableData.slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize)}},created:function(){this.getData()},methods:{getUser:function(){if(""==this.select_word)this.tableData=this.tempData;else{this.tableData=[];var e=!0,t=!1,r=void 0;try{for(var i,o=a()(this.tempData);!(e=(i=o.next()).done);e=!0){var s=i.value;s.username.includes(this.select_word)&&this.tableData.push(s)}}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}}},handleCurrentChange:function(e){this.currentPage=e},getData:function(){var e=this;this.tableData=[],this.tempData=[],Object(o.f)().then(function(t){e.tableData=t,e.tempData=t})},handleEdit:function(e){this.editVisible=!0,this.editForm={id:e.id,username:e.username,password:e.password,sex:e.sex,phoneNum:e.phoneNum,email:e.email,birth:e.birth,introduction:e.introduction,location:e.location}},editSave:function(){var e=this;this.$refs.editForm.validate(function(t){if(t){var r=new Date(e.editForm.birth),i=r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate(),a=new URLSearchParams;a.append("id",e.editForm.id),a.append("username",e.editForm.username),a.append("password",e.editForm.password),a.append("sex",e.editForm.sex),a.append("phoneNum",e.editForm.phoneNum),a.append("email",e.editForm.email),a.append("birth",i),a.append("introduction",e.editForm.introduction),a.append("location",e.editForm.location),Object(o.r)(a).then(function(t){1==t.code?(e.getData(),e.notify("修改成功","success")):e.notify("修改失败","error")}).catch(function(e){console.log(e)}),e.editVisible=!1}})},addConsumer:function(){var e=this;this.$refs.registerForm.validate(function(t){if(t){var r=e.registerForm.birth,i=r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate(),a=new URLSearchParams;a.append("username",e.registerForm.username),a.append("password",e.registerForm.password),a.append("sex",e.registerForm.sex),a.append("phoneNum",e.registerForm.phoneNum),a.append("email",e.registerForm.email),a.append("birth",i),a.append("introduction",e.registerForm.introduction),a.append("location",e.registerForm.location),a.append("avator","/img/user.jpg"),Object(o.l)(a).then(function(t){1==t.code?(e.getData(),e.notify("添加成功","success")):e.notify("添加失败","error")}).catch(function(e){console.log(e)}),e.centerDialogVisible=!1}})},delRow:function(){var e=this;Object(o.a)(this.idx).then(function(t){t?(e.getData(),e.notify("删除成功","success")):e.notify("删除失败","error")}).catch(function(e){console.log(e)}),this.delVisible=!1}}},n={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"table"},[r("div",{staticClass:"container"},[r("div",{staticClass:"handle-box"},[r("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.delAll}},[e._v("批量删除")]),e._v(" "),r("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.centerDialogVisible=!0}}},[e._v("添加新用户")]),e._v(" "),r("el-input",{staticClass:"handle-input",attrs:{size:"medium",placeholder:"       请输入用户名"},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}}),e._v(" "),r("el-button",{staticClass:"handle-getButton",attrs:{type:"primary",size:"medium"},on:{click:e.getUser}},[e._v("查询")])],1)]),e._v(" "),r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{size:"medium",border:"",height:"680px",data:e.data},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"60",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"用户图片",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"singer-img"},[r("img",{staticStyle:{width:"100%"},attrs:{src:e.getUrl(t.row.avator)}})])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"用户名",prop:"username",width:"200",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"性别",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.changeSex(t.row.sex))+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"手机号",prop:"phoneNum",width:"200",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"电子邮箱",prop:"email",width:"280",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{width:"180px",label:"出生日期",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.attachBirthday(t.row.birth))+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"280",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"medium"},on:{click:function(r){return e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),r("el-button",{staticClass:"button-space",attrs:{size:"medium",type:"danger"},on:{click:function(r){return e.handleDelete(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),r("div",{staticClass:"pagination"},[r("el-pagination",{attrs:{background:"",layout:"total,prev,pager,next","current-page":e.currentPage,"page-size":e.pageSize,total:e.tableData.length},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),r("el-dialog",{attrs:{title:"添加新用户",visible:e.centerDialogVisible,width:"400px",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[r("el-form",{ref:"registerForm",attrs:{model:e.registerForm,"label-width":"80px",rules:e.rules}},[r("el-form-item",{attrs:{prop:"username",label:"用户名",size:"mini"}},[r("el-input",{attrs:{placeholder:"用户名"},model:{value:e.registerForm.username,callback:function(t){e.$set(e.registerForm,"username",t)},expression:"registerForm.username"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"password",label:"密码",size:"mini"}},[r("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"性别",size:"mini"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.registerForm.sex,expression:"registerForm.sex"}],attrs:{type:"radio",name:"sex",value:"0"},domProps:{checked:e._q(e.registerForm.sex,"0")},on:{change:function(t){return e.$set(e.registerForm,"sex","0")}}}),e._v(" 女  \n          "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.registerForm.sex,expression:"registerForm.sex"}],attrs:{type:"radio",name:"sex",value:"1"},domProps:{checked:e._q(e.registerForm.sex,"1")},on:{change:function(t){return e.$set(e.registerForm,"sex","1")}}}),e._v(" 男\n      ")]),e._v(" "),r("el-form-item",{attrs:{prop:"phoneNum",label:"手机号",size:"mini"}},[r("el-input",{attrs:{placeholder:"手机号"},model:{value:e.registerForm.phoneNum,callback:function(t){e.$set(e.registerForm,"phoneNum",t)},expression:"registerForm.phoneNum"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"email",label:"电子邮箱",size:"mini"}},[r("el-input",{attrs:{placeholder:"电子邮箱"},model:{value:e.registerForm.email,callback:function(t){e.$set(e.registerForm,"email",t)},expression:"registerForm.email"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"birth",label:"生日",size:"mini"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.registerForm.birth,callback:function(t){e.$set(e.registerForm,"birth",t)},expression:"registerForm.birth"}})],1)],1),e._v(" "),r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"medium"},on:{click:e.addConsumer}},[e._v("确定")]),e._v(" "),r("el-button",{attrs:{size:"medium"},on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取消")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"修改用户",visible:e.editVisible,width:"400px",center:""},on:{"update:visible":function(t){e.editVisible=t}}},[r("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.rules}},[r("el-form-item",{attrs:{prop:"username",label:"用户名",size:"mini"}},[r("el-input",{attrs:{placeholder:"用户名"},model:{value:e.editForm.username,callback:function(t){e.$set(e.editForm,"username",t)},expression:"editForm.username"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"password",label:"密码",size:"mini"}},[r("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.editForm.password,callback:function(t){e.$set(e.editForm,"password",t)},expression:"editForm.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"性别",size:"mini"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.editForm.sex,expression:"editForm.sex"}],attrs:{type:"radio",name:"sex",value:"0"},domProps:{checked:e._q(e.editForm.sex,"0")},on:{change:function(t){return e.$set(e.editForm,"sex","0")}}}),e._v(" 女  \n        "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.editForm.sex,expression:"editForm.sex"}],attrs:{type:"radio",name:"sex",value:"1"},domProps:{checked:e._q(e.editForm.sex,"1")},on:{change:function(t){return e.$set(e.editForm,"sex","1")}}}),e._v(" 男\n      ")]),e._v(" "),r("el-form-item",{attrs:{prop:"phoneNum",label:"手机号",size:"mini"}},[r("el-input",{attrs:{placeholder:"手机号"},model:{value:e.editForm.phoneNum,callback:function(t){e.$set(e.editForm,"phoneNum",t)},expression:"editForm.phoneNum"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"email",label:"电子邮箱",size:"mini"}},[r("el-input",{attrs:{placeholder:"电子邮箱"},model:{value:e.editForm.email,callback:function(t){e.$set(e.editForm,"email",t)},expression:"editForm.email"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"birth",label:"生日",size:"mini"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.editForm.birth,callback:function(t){e.$set(e.editForm,"birth",t)},expression:"editForm.birth"}})],1)],1),e._v(" "),r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"medium"},on:{click:e.editSave}},[e._v("确定")]),e._v(" "),r("el-button",{attrs:{size:"medium"},on:{click:function(t){e.editVisible=!1}}},[e._v("取消")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"删除用户",visible:e.delVisible,width:"400px",center:""},on:{"update:visible":function(t){e.delVisible=t}}},[r("div",{attrs:{align:"center"}},[e._v("删除不可恢复，是否确定删除")]),e._v(" "),r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"mini"},on:{click:e.delRow}},[e._v("确定")]),e._v(" "),r("el-button",{attrs:{size:"mini"},on:{click:function(t){e.delVisible=!1}}},[e._v("取消")])],1)])],1)},staticRenderFns:[]};var l=r("VU/8")(s,n,!1,function(e){r("mHwe")},"data-v-68df8555",null);t.default=l.exports},mHwe:function(e,t){}});
//# sourceMappingURL=6.d8980bc2398fa13a173b.js.map